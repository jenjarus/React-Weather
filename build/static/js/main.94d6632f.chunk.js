(this["webpackJsonpreact-weather"]=this["webpackJsonpreact-weather"]||[]).push([[0],{17:function(e,t,a){},18:function(e,t,a){},26:function(e,t,a){"use strict";a.r(t);var r=a(1),c=a.n(r),n=a(7),o=a.n(n),s=a(4),i=a.n(s),d=a(6),u=a(5),j=(a(17),a(18),a(3));var l=a(0),b={setIdCity:function(e){return{type:"SET_ID_CITY",idCity:e}},setCityName:function(e){return{type:"SET_CITY",city:e}},setErrorCity:function(e){return{type:"SET_ERROR_CITY",errorCity:e}}},m=Object(j.b)(null,b)((function(e){var t=e.setIdCity,a=e.setCityName,c=e.setErrorCity,n=Object(r.useState)("Moscow"),o=Object(u.a)(n,2),s=o[0],j=o[1],b=Object(r.useState)(!1),m=Object(u.a)(b,2),O=m[0],h=m[1],y=Object(r.useState)([]),f=Object(u.a)(y,2),T=f[0],x=f[1],w=function(){var e=Object(d.a)(i.a.mark((function e(t){var a,r,c;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a="/api/location/search/?query=".concat(t),e.next=3,fetch(a);case 3:return r=e.sent,e.next=6,r.json();case 6:c=e.sent,x(c);case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),p=function(){var e=Object(d.a)(i.a.mark((function e(r){var n,o,s;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n="/api/location/search/?query=".concat(r),e.prev=1,e.next=4,fetch(n);case 4:return o=e.sent,e.next=7,o.json();case 7:s=e.sent,t(s[0].woeid),a(s[0].title),c(),e.next=17;break;case 13:e.prev=13,e.t0=e.catch(1),console.log(e.t0),c(!0);case 17:case"end":return e.stop()}}),e,null,[[1,13]])})));return function(t){return e.apply(this,arguments)}}(),v=function(){return T.map((function(e,r){return Object(l.jsx)("li",{onClick:function(){return function(e,r){j(e),a(e),t(r),x([])}(e.title,e.woeid)},children:e.title},r)}))};return Object(l.jsx)("div",{className:"line line_col",children:Object(l.jsxs)("form",{className:"form_box",onSubmit:function(e){e.preventDefault(),p(s),x([])},children:[Object(l.jsxs)("div",{className:"line",children:[Object(l.jsx)("input",{type:"text",placeholder:"\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u0433\u043e\u0440\u043e\u0434",value:s,onChange:function(e){j(e.target.value),w(e.target.value)},onFocus:function(){return h(!0)},onBlur:function(){return setTimeout(h,500,!1)}}),Object(l.jsx)("button",{className:"btn",children:"\u041f\u0440\u0438\u043c\u0435\u043d\u0438\u0442\u044c"})]}),function(e){if(e&&T.length)return Object(l.jsx)("div",{className:"search_list",children:Object(l.jsx)("ul",{children:v()})})}(O)]})})})),O={Snow:"\u0421\u043d\u0435\u0433",Sleet:"\u041c\u043e\u043a\u0440\u044b\u0439 \u0441\u043d\u0435\u0433",Hail:"\u0413\u0440\u0430\u0434",Thunderstorm:"\u0413\u0440\u043e\u0437\u0430","Heavy Rain":"\u041b\u0438\u0432\u0435\u043d\u044c","Light Rain":"\u041b\u0435\u0433\u043a\u0438\u0439 \u0434\u043e\u0436\u0434\u044c",Showers:"\u0414\u043e\u0436\u0434\u044c","Heavy Cloud":"\u0421\u0438\u043b\u044c\u043d\u0430\u044f \u043e\u0431\u043b\u0430\u0447\u043d\u043e\u0441\u0442\u044c","Light Cloud":"\u041d\u0435\u0431\u043e\u043b\u044c\u0448\u0430\u044f \u043e\u0431\u043b\u0430\u0447\u043d\u043e\u0441\u0442\u044c",Clear:"\u042f\u0441\u043d\u043e"},h={today:"\u0421\u0435\u0433\u043e\u0434\u043d\u044f",yesterday:"\u0412\u0447\u0435\u0440\u0430",tomorrow:"\u0417\u0430\u0432\u0442\u0440\u0430",afterTomorrow:"\u041f\u043e\u0441\u043b\u0435\u0437\u0430\u0432\u0442\u0440\u0430"};var y=Object(j.b)((function(e){return{dataToday:e.dataToday}}))((function(e){var t=e.data,a=e.flag,r="item";r+="today"===a?" today":"";var c="/static/img/weather/png/64/".concat(t.weather_state_abbr,".png"),n=(t.the_temp>0?"+":"")+Number(t.the_temp).toFixed(0),o=(t.min_temp>0?"+":"")+Number(t.min_temp).toFixed(0),s=(t.max_temp>0?"+":"")+Number(t.max_temp).toFixed(0),i=(t.wind_speed/2.236).toFixed(1);return Object(l.jsxs)("div",{className:r,children:[Object(l.jsx)("div",{className:"weather_time",children:h[a]}),Object(l.jsx)("div",{className:"weather_img",children:Object(l.jsx)("img",{src:c,alt:"img_weather"})}),Object(l.jsx)("div",{className:"weather_state",children:O[t.weather_state_name]}),Object(l.jsxs)("div",{className:"weather_temp",children:["\u0422\u0435\u043c\u043f\u0435\u0440\u0430\u0442\u0443\u0440\u0430: ",Object(l.jsxs)("span",{className:"temp",children:[n,"\xb0C"]}),Object(l.jsxs)("div",{className:"temp_other",children:[Object(l.jsxs)("span",{children:["min: ",o,"\xb0C"]}),Object(l.jsxs)("span",{children:["max: ",s,"\xb0C"]})]})]}),Object(l.jsxs)("div",{className:"weather_wind",children:["\u0412\u0435\u0442\u0435\u0440: ",i,"\u043c/\u0441 ",t.wind_direction_compass]})]})}));var f=Object(j.b)((function(e){return{cityName:e.cityName,dataYesterday:e.dataYesterday,dataToday:e.dataToday,dataTomorrow:e.dataTomorrow,dataAfterTomorrow:e.dataAfterTomorrow}}))((function(e){var t=e.cityName,a=e.dataYesterday,r=e.dataToday,c=e.dataTomorrow,n=e.dataAfterTomorrow;return Object(l.jsxs)("div",{className:"info_box",children:[Object(l.jsx)("div",{className:"title_city",children:t}),Object(l.jsxs)("div",{className:"items",children:[Object(l.jsx)(y,{data:a,flag:"yesterday"}),Object(l.jsx)(y,{data:r,flag:"today"}),Object(l.jsx)(y,{data:c,flag:"tomorrow"}),Object(l.jsx)(y,{data:n,flag:"afterTomorrow"})]})]})}));var T={setDataToday:function(e){return{type:"SET_DATA_TODAY",dataToday:e}},setDataYesterday:function(e){return{type:"SET_DATA_YESTERDAY",dataYesterday:e}},setDataTomorrow:function(e){return{type:"SET_DATA_TOMORROW",dataTomorrow:e}},setDataAfterTomorrow:function(e){return{type:"SET_DATA_AFTER_TOMORROW",dataAfterTomorrow:e}}},x=Object(j.b)((function(e){return{idCity:e.idCity,errorCity:e.errorCity}}),T)((function(e){var t=e.idCity,a=e.errorCity,c=e.setDataToday,n=e.setDataYesterday,o=e.setDataTomorrow,s=e.setDataAfterTomorrow,j=Object(r.useState)(!1),b=Object(u.a)(j,2),O=b[0],h=b[1],y=function(){var e=Object(d.a)(i.a.mark((function e(t){var a,r,d,u,j,l=arguments;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=l.length>1&&void 0!==l[1]?l[1]:"",r=l.length>2?l[2]:void 0,d="/api/location/".concat(t).concat(a,"/"),e.next=5,fetch(d);case 5:return u=e.sent,e.next=8,u.json();case 8:j=e.sent,e.t0=r,e.next="today"===e.t0?12:"yesterday"===e.t0?14:"tomorrow"===e.t0?16:"afterTomorrow"===e.t0?18:20;break;case 12:return c(j.consolidated_weather[0]),e.abrupt("break",22);case 14:return n(j[0]),e.abrupt("break",22);case 16:return o(j[0]),e.abrupt("break",22);case 18:return s(j[0]),e.abrupt("break",22);case 20:return console.log("\u0423\u043f\u0441..."),e.abrupt("break",22);case 22:h(!0);case 23:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),T=function(e){var t,a,r,c=(new Date).getTime();switch(e){case"yesterday":c=x(c-864e5),t=c.getFullYear(),a=c.getMonth(),r=c.getDate();break;case"tomorrow":c=x(c+864e5),t=c.getFullYear(),a=c.getMonth(),r=c.getDate();break;case"afterTomorrow":c=x(c+1728e5),t=c.getFullYear(),a=c.getMonth(),r=c.getDate();break;default:console.log("\u0423\u043f\u0441...")}return"/".concat(t,"/").concat(a+1,"/").concat(r)},x=function(e){var t=new Date(e);return t=new Date(t.toString())};return Object(r.useEffect)((function(){y(t,"","today"),y(t,T("yesterday"),"yesterday"),y(t,T("tomorrow"),"tomorrow"),y(t,T("afterTomorrow"),"afterTomorrow")}),[t]),Object(l.jsxs)(l.Fragment,{children:[Object(l.jsx)("header",{children:Object(l.jsx)("div",{className:"container",children:Object(l.jsx)("div",{className:"header",children:Object(l.jsxs)("div",{className:"title",children:["\u041f\u0440\u043e\u0433\u043d\u043e\u0437 ",Object(l.jsx)("span",{className:"red",children:"\u043f\u043e\u0433\u043e\u0434\u044b"})]})})})}),Object(l.jsx)("main",{children:Object(l.jsxs)("article",{className:"container",children:[Object(l.jsx)(m,{}),O?a?Object(l.jsx)(l.Fragment,{children:Object(l.jsx)("div",{className:"info_box",children:Object(l.jsx)("div",{className:"error_msg",children:"\u0413\u043e\u0440\u043e\u0434 \u043d\u0435 \u043d\u0430\u0439\u0434\u0435\u043d"})})}):Object(l.jsx)(l.Fragment,{children:Object(l.jsx)(f,{})}):Object(l.jsx)("div",{children:"\u0417\u0430\u0433\u0440\u0443\u0437\u043a\u0430..."})]})}),Object(l.jsx)("footer",{children:Object(l.jsx)("div",{className:"container",children:Object(l.jsx)("div",{className:"footer",children:Object(l.jsxs)("div",{className:"copy",children:["\xa9Jenjarus ",Object(l.jsx)("span",{className:"year",children:"2077"})]})})})})]})})),w=a(11),p=a(2),v={idCity:2122265,cityName:"Moscow",dataToday:{},dataYesterday:{},dataTomorrow:{},dataAfterTomorrow:{},errorCity:!1};var _=Object(w.a)((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:v,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET_ID_CITY":return Object(p.a)(Object(p.a)({},e),{},{idCity:t.idCity});case"SET_CITY":return Object(p.a)(Object(p.a)({},e),{},{cityName:t.city});case"SET_DATA_TODAY":return Object(p.a)(Object(p.a)({},e),{},{dataToday:t.dataToday});case"SET_DATA_YESTERDAY":return Object(p.a)(Object(p.a)({},e),{},{dataYesterday:t.dataYesterday});case"SET_DATA_TOMORROW":return Object(p.a)(Object(p.a)({},e),{},{dataTomorrow:t.dataTomorrow});case"SET_DATA_AFTER_TOMORROW":return Object(p.a)(Object(p.a)({},e),{},{dataAfterTomorrow:t.dataAfterTomorrow});case"SET_ERROR_CITY":return Object(p.a)(Object(p.a)({},e),{},{errorCity:t.errorCity});default:return e}}));o.a.render(Object(l.jsx)(c.a.StrictMode,{children:Object(l.jsx)(j.a,{store:_,children:Object(l.jsx)(x,{})})}),document.getElementById("root"))}},[[26,1,2]]]);
//# sourceMappingURL=main.94d6632f.chunk.js.map